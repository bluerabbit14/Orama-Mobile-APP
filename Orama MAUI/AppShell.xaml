<?xml version="1.0" encoding="UTF-8" ?>
<Shell  
    x:Class="Orama.AppShell"  
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"  
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"  
    xmlns:local="clr-namespace:Orama"  
    xmlns:pages="clr-namespace:Orama.Pages" 
    xmlns:vm="clr-namespace:Orama.Models.ViewModels" 
    Shell.FlyoutBehavior="Flyout"  
    Shell.TabBarIsVisible="True"
    Shell.TabBarBackgroundColor="{AppThemeBinding Light=#E1E1E1,Dark=#E1E1E1}"
    Shell.TabBarUnselectedColor="{AppThemeBinding Light=#ACACAC,Dark=#ACACAC}"
    Shell.TabBarForegroundColor="{AppThemeBinding Light=#000,Dark=#000}"
    Shell.TabBarTitleColor="{AppThemeBinding Light=#000,Dark=#000}"
    Title="Orama">

    <Shell.FlyoutContentTemplate >
        <DataTemplate>
            <Grid RowDefinitions="Auto,*,Auto" Padding="10" Margin="10">
                <Grid.BindingContext>
                    <vm:FlyoutContentViewModel/>
                </Grid.BindingContext>

                <StackLayout Grid.Row="0" Margin="10,5">
                    <Grid ColumnDefinitions="auto,*,auto" Padding="0,0,0,10">
                        <Border Grid.Column="0"  HorizontalOptions="Start">
                            <Border.Stroke>
                                <SolidColorBrush Color="Transparent"/>
                            </Border.Stroke>
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="35"/>
                            </Border.StrokeShape>
                            <Image Source="Image.png" WidthRequest="45" HeightRequest="45">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer  Tapped="TapGestureRecognizer_Tapped"/>
                                </Image.GestureRecognizers>
                            </Image>
                        </Border>

                    </Grid>
                    <VerticalStackLayout>
                        <Label x:Name="Username"  Text="@being.sif" FontAttributes="Bold"/>
                        <Label x:Name="Email"  Text="14asifcr7@gmail.com"/>
                    </VerticalStackLayout>
                    <BoxView HeightRequest=".1" Color="{AppThemeBinding Light=Black,Dark=White}" Margin="0,5" />
                </StackLayout>
                <!-- Header -->

                <CollectionView Grid.Row="1" ItemsSource="{Binding FlyoutContents}"
                                 SelectionMode="Single"
                                 SelectedItem="{Binding FlyoutContent}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Orientation="Vertical" Padding="5">
                                <BoxView HeightRequest=".1" WidthRequest="250" IsVisible="{Binding Separator}" Margin="0,0,0,15"/>
                                <HorizontalStackLayout>
                                    <Image Source="{Binding Icon}" WidthRequest="{Binding ImageSize}" HeightRequest="{Binding ImageSize}" />
                                    <Label Text="{Binding Title}" Margin="10,0,0,0" FontSize="{Binding FontSize}" HorizontalOptions="Center"/>
                                </HorizontalStackLayout>
                            </StackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                <!--Main Content -->

                <Grid ColumnDefinitions="*,auto" Grid.Row="2">
                    <Image x:Name="ThemeToggleIcon" Source="{AppThemeBinding Light=sun.png, Dark=moon.png}" HeightRequest="30" HorizontalOptions="Start" Margin="0,10">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnThemeToggleTapped" />
                        </Image.GestureRecognizers>
                    </Image>
                    <Border Grid.Column="1" HorizontalOptions="End" WidthRequest="80" HeightRequest="35">
                        <Border.Stroke>
                            <SolidColorBrush Color="red"/>
                        </Border.Stroke>
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10"/>
                        </Border.StrokeShape>
                        <Button Text="Log out" Background="Transparent" TextColor="red" WidthRequest="80" HeightRequest="35" Clicked="Button_Clicked"/>
                    </Border>
                </Grid>
                <!-- Footer -->

            </Grid>
        </DataTemplate>
    </Shell.FlyoutContentTemplate>

    <TabBar>
        <ShellContent Route="Home" Icon="{AppThemeBinding Light=home.png,Dark=home_light.png}">
            <ShellContent.ContentTemplate>
                <DataTemplate>
                    <pages:Home />
                </DataTemplate>
            </ShellContent.ContentTemplate>
        </ShellContent>
        <ShellContent Route="Search" Icon="{AppThemeBinding Light=search.png,Dark=search_light.png}">
            <ShellContent.ContentTemplate>
                <DataTemplate>
                    <pages:Search />
                </DataTemplate>
            </ShellContent.ContentTemplate>
        </ShellContent>
    </TabBar>

</Shell>
